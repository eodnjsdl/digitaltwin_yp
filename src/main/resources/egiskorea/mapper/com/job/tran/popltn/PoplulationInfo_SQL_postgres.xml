<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper	namespace="population">

<!-- 양평군 리 단위 인구수 목록 조회 -->
<select id="selectPopulationInfoList" resultType="populationVO">
		select li_cd 
			 , stdr_ym 
			 , all_popltn_cnt
			 , male_popltn_cnt 
			 , female_popltn_cnt 
		from tgb_li_popltn_info
</select>

<!-- 양평군 총 인구 수 조회 -->
<select id="selectAllPopulationCnt" resultType="int">
		select sum(all_popltn_cnt) all_popltn_cnt 
		  from tgb_li_popltn_info
		  where li_cd like '41830%'
</select>

<!-- 해당하는 면 정보 조회 (리 단위 조회) -->
<select id="selectMyeonPopulationInfoList" parameterType="populationVO" resultType="populationVO">
 select c.code_nm
 	  , tlpi.li_cd 
 	  , tlpi.stdr_ym 
	  , tlpi.all_popltn_cnt
	  , tlpi.male_popltn_cnt 
	  , tlpi.female_popltn_cnt
   from (
			select li_cd 
				 , stdr_ym 
				 , all_popltn_cnt
				 , male_popltn_cnt 
				 , female_popltn_cnt  
			  from tgb_li_popltn_info
			 where li_cd like #{liCd} || '%'
		 ) tlpi
 inner join comtccmmndetailcode c on (c.code = tlpi.li_cd and c.code_id = 'YPLI')
</select>
	
	
</mapper>